# Mi primer GitHub Action
name: Hello World Tutorial

# Cu√°ndo se ejecuta este workflow
on:
  # Se ejecuta cuando haces push a la rama main
  push:
    branches: [ main ]
  
  # Se ejecuta cuando abres o actualizas un Pull Request
  pull_request:
    branches: [ main ]
    
  # Te permite ejecutarlo manualmente desde la interfaz web
  workflow_dispatch:

# Los trabajos que se van a ejecutar
jobs:
  # Primer trabajo: saludo b√°sico
  hello-job:
    # Sistema operativo: Ubuntu (gratis)
    runs-on: ubuntu-latest
    
    # Lista de pasos
    steps:
      # Paso 1: Descargar el c√≥digo del repositorio
      - name: üì• Checkout del c√≥digo
        uses: actions/checkout@v4
      
      # Paso 2: Saludo b√°sico
      - name: üëã Decir Hola
        run: |
          echo "¬°Hola Mundo desde GitHub Actions!"
          echo "Repositorio: ${{ github.repository }}"
          echo "Rama: ${{ github.ref }}"
          echo "Usuario: ${{ github.actor }}"
          date
      
      # Paso 3: Informaci√≥n del sistema
      - name: üñ•Ô∏è Informaci√≥n del Sistema
        run: |
          echo "=== INFORMACI√ìN DEL SISTEMA ==="
          uname -a
          echo ""
          echo "=== CPU INFO ==="
          lscpu | head -10
          echo ""
          echo "=== MEMORIA ==="
          free -h
          echo ""
          echo "=== DISCO ==="
          df -h
      
      # Paso 4: Instalar Node.js
      - name: ‚öôÔ∏è Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
      
      # Paso 5: Crear un archivo simple
      - name: üìù Crear archivo de saludo
        run: |
          mkdir -p output
          echo "¬°Hola desde GitHub Actions!" > output/saludo.txt
          echo "Generado el: $(date)" >> output/saludo.txt
          echo "Por: ${{ github.actor }}" >> output/saludo.txt
          cat output/saludo.txt
      
      # Paso 6: Listar archivos del proyecto
      - name: üìÇ Listar archivos del proyecto
        run: |
          echo "=== ARCHIVOS EN EL REPOSITORIO ==="
          ls -la
          echo ""
          echo "=== CONTENIDO DEL README ==="
          if [ -f README.md ]; then
            cat README.md
          else
            echo "No hay README.md"
          fi

  # Segundo trabajo: trabajar con variables de entorno
  environment-job:
    runs-on: ubuntu-latest
    
    # Variables de entorno para este trabajo
    env:
      MI_VARIABLE: "Hola desde variable de entorno"
      NUMERO_MAGICO: 42
    
    steps:
      - name: üîç Variables de entorno
        run: |
          echo "Variable personalizada: $MI_VARIABLE"
          echo "N√∫mero m√°gico: $NUMERO_MAGICO"
          echo ""
          echo "=== VARIABLES DE GITHUB ==="
          echo "Repositorio: $GITHUB_REPOSITORY"
          echo "Workspace: $GITHUB_WORKSPACE"
          echo "Event: $GITHUB_EVENT_NAME"
          echo "Actor: $GITHUB_ACTOR"
          echo "SHA: $GITHUB_SHA"
      
      - name: üßÆ Matem√°ticas b√°sicas
        env:
          NUMERO_A: 10
          NUMERO_B: 5
        run: |
          echo "N√∫mero A: $NUMERO_A"
          echo "N√∫mero B: $NUMERO_B"
          echo "Suma: $((NUMERO_A + NUMERO_B))"
          echo "Resta: $((NUMERO_A - NUMERO_B))"
          echo "Multiplicaci√≥n: $((NUMERO_A * NUMERO_B))"

  # Tercer trabajo: trabajar con condicionales
  conditional-job:
    runs-on: ubuntu-latest
    
    steps:
      - name: ‚úÖ Solo en push a main
        if: github.event_name == 'push' && github.ref == 'refs/heads/main'
        run: |
          echo "¬°Este paso solo se ejecuta en push a main!"
      
      - name: üîÄ Solo en Pull Request
        if: github.event_name == 'pull_request'
        run: |
          echo "¬°Este paso solo se ejecuta en Pull Requests!"
      
      - name: üë§ Solo si eres t√∫
        if: github.actor == github.repository_owner
        run: |
          echo "¬°Hola propietario del repositorio!"
      
      - name: üåÖ Solo por las ma√±anas (UTC)
        run: |
          HOUR=$(date +%H)
          echo "Hora actual: $HOUR"
          if [ $HOUR -lt 12 ]; then
            echo "¬°Buenos d√≠as!"
          else
            echo "¬°Buenas tardes/noches!"
          fi

  # Cuarto trabajo: dependencias entre trabajos
  final-job:
    # Este trabajo espera a que terminen los otros
    needs: [hello-job, environment-job, conditional-job]
    runs-on: ubuntu-latest
    
    steps:
      - name: üéâ Trabajo Final
        run: |
          echo "¬°Todos los trabajos anteriores han terminado exitosamente!"
          echo "Este es el trabajo final üöÄ"
